---
name: 使用元素和液体网络构建
goal: 学习使用 Elements 开源区块链平台及其主要功能并进行开发
objectives: 

  - 了解 Elements 区块链平台和 Liquid 侧链的基本概念。
  - 学习如何为独立和侧链配置设置和运行 Elements 节点。
  - 获得联合区块签名和联合双向 Peg 的实际经验。
  - 为真实世界的使用案例建立和管理安全、高效的区块链环境。

---
# 以液体和元素为基础

了解 Liquid 和 Elements 的高级特性和功能，学习如何有效利用这些工具来增强您的开发项目。本培训提供完整的理论和实践基础，使您能够掌握保密交易、发行资产和联合区块签名等功能。

Liquid 基于 Elements 框架，旨在提高金融和技术解决方案的隐私性、可扩展性和功能性。在本课程中，您将获得有关资产发行和管理、联邦双向对等（Federated 2-Way Peg）以及使用 elementsd 和 elements-cli 等工具的实践经验，使您能够根据自己的需求创建创新解决方案。

本课程专为各种经验水平的开发人员量身定制。初学者和中级用户可以找到通俗易懂的解释和实用示例，而高级用户则可以深入了解 Liquid 和 Elements 的技术细节和鲜为人知的功能。

加入我们，提升你的技能，释放 Liquid 和 Elements 的全部潜能，为 Liquid 创新的未来创造有影响力的工具。

+++
# 导言

<partId>8f34de87-6e9a-4e3b-a326-50fc7c1803b3</partId>

## 课程介绍

<chapterId>a721398e-7040-4edd-be53-b485ea759fa9</chapterId>

![Video](https://youtu.be/gkQfnwYLyI0?si=H6cIPhgZaSAwHaHI)

圆方学院的目的是介绍和解释圆方的关键概念，圆方是Liquid的开源平台。课程结束时，您应该对 Elements 的主要功能（如保密交易和发行资产）以及 Elements Core 的运行流程有了很好的了解。

每个部分都有附带说明文字的课程和视频，最后还有小测验。问题的数量与前一个主题的大小有关。第 10 节将总结课程内容，并以一个较大的测验结束。

如对测验答案有任何疑问、要求提供更多信息或质疑，请直接与你们的老师 James Dorfman 联系。

## 要素概述

<chapterId>7a7f2712-5300-4a6d-b1ed-05eab731bc35</chapterId>

![Video](https://youtu.be/ns-JLGdkNig?si=fmWye_boRSvVF1Bt)

Elements 是一个开源、支持侧链的区块链平台，提供社区成员开发的强大功能，如保密交易和发行资产。

Elements 的核心是一个协议，它能够围绕交易历史和规则达成共识，这些规则管理着存储在分布式区块链分类账中的资产的转移和创建。

有关 Elements 的更多背景信息，请访问 Elements 项目网站 (https://elementsproject.org/)、Liquid 官方博客 (https://blog.liquid.net/) 和开发者门户网站(https://liquid.net/devs)。

### 要素

Elements 于 2015 年推出，可降低内部开发和研究成本，并利用最新的区块链技术，为实施开辟了许多新的用例。基于Elements的区块链既可以作为独立的区块链运行，也可以与其他区块链挂钩，作为侧链运行。将 Elements 作为侧链运行，可以在不同区块链之间可验证地转移资产。

它建立在比特币代码库的基础上并对其进行了扩展，让熟悉比特币应用程序接口（API）的开发人员能够快速、经济地创建工作区块链并测试概念验证项目。建立在比特币代码库基础上的 Elements 还能为比特币协议本身的变更提供测试平台。

下面列出了 "元素 "的一些主要功能。

#### 机密交易

默认情况下，"要素 "中的所有地址都使用保密交易进行保密。所谓保密，是指除了参与者和他们选择向其透露保密密钥的人之外，其他人都无法从密码学上获知所转移资产的数量和类型。

#### 已发行资产

元素上的发行资产允许在网络参与者之间发行和转让多种类型的资产。已发行资产还受益于保密交易，持有相关再发行令牌的任何人都可以再发行或销毁该资产。

#### Federated 2-Way Peg

Elements 是一个通用的区块链平台，也可以与现有的区块链（如比特币）"挂钩"，以实现资产从一条链到另一条链的双向转移。将 Elements 作为侧链实施，可以绕过主链的一些固有属性，同时保留主链上资产所提供的良好安全性。

#### 签名块

Elements 使用一个名为 "区块签名者 "的签名者强联盟，这些签名者以可靠和及时的方式签名并创建区块。这就消除了 PoW 挖矿过程中的交易延迟，因为 PoW 挖矿过程中的随机泊松分布会导致较大的区块时间差异。联合区块签名过程实现了可靠的区块创建，而无需引入第三方信任或基于计算 "算法 "的挖矿。

Elements 在比特币核心代码库的基础上增加了所有这些功能，扩展了主链协议的能力，并在作为侧链或独立区块链解决方案部署时实现了新的业务用例。

# 要素

<partId>ac68d611-be84-432f-a3a8-620d310e131c</partId>

## 元素如何工作

<chapterId>05d88877-58b0-455b-9ae6-a72d19070525</chapterId>

![Video](https://youtu.be/v0lzmfH81AY?si=V-xDWfmDLKyBcdPs)

Elements 为区块链用户日常面临的问题（交易延迟、缺乏隐私和可替代性风险）提供了技术解决方案。

通过使用联合区块签名和保密交易，Elements 克服了这些问题。

与比特币网络不同，圆方的区块签名过程不依赖于动态成员多方签名（DMMS）和工作证明（PoW）。取而代之的是，Elements 使用一个名为 "区块签名者"（Block Signers）的签名者强联盟，这些签名者可以可靠、及时地签名和创建区块。这就消除了 PoW 挖矿过程中的交易延迟，因为 PoW 挖矿过程中的随机泊松分布会造成较大的区块时间差异。联合区块签名流程无需引入第三方信任，即可实现可靠的区块创建。

元素可以作为比特币等其他区块链的侧链运行，也可以作为独立的区块链运行，不依赖其他网络。

当作为侧链使用时，强联盟还包含一些成员，他们可以在主链和元素侧链之间安全、可控地转移资产。受控资产转移被称为 "联邦双向交换"（Federated 2-Way Peg），负责资产转移的成员被称为 "守望者"（Watchmen）。

圆方网络的运行过程和网络参与者的角色对于了解圆方如何运作非常重要。

无论是作为侧链还是独立的区块链，Elements 都利用区块签名者强联盟来生成区块。

### 强大的联合会

Elements 采用了 Blockstream 首次提出的共识模式，即强联盟（Strong Federations）。强联盟不需要工作证明（PoW），而是依赖于一群互不信任的参与者（称为 "功能者"）的集体行动。

在强联邦中，功能员可以扮演的角色有区块签名者和守望者。如果以侧链或独立区块链模式运行元素，则需要区块签名者，而只有在侧链设置中才需要守望者。

强联盟成员可以执行的操作分为两种不同的角色，以增强安全性并限制攻击者可能造成的破坏。

当这些参与者的角色结合在一起时，Elements 既能提供快速的区块创建（更快和最终的交易确认），又能提供有保证的可转让资产（可直接链接到另一个区块链的挂钩资产）。

您可在此阅读《强大的联合会》白皮书： https://blockstream.com/strong-federations.pdf

### 区块签名者

比特币这样的区块链是通过区块签名者动态群组中的任何人展示所耗费的工作证明来扩展区块链的。区块组的动态性质带来了此类系统固有的延迟问题。

通过使用固定的签名者集，联邦模式用已知集、多签名方案取代了动态集。减少了扩展区块链所需的参与者数量，提高了系统的速度和可扩展性，同时各方的验证确保了交易历史的完整性。

联合区块签名由几个阶段组成：


- 步骤 1 - 区块签名者以循环方式向所有其他参与的区块签名者提出候选区块。
- 步骤 2 - 每个区块签名者通过预先承诺签名给定的候选区块来表明自己的意图。
- 步骤 3 - 如果达到了预承诺的给定阈值，每个区块签名者都会签署该区块。
- 步骤 4 - 如果达到签名阈值（可能与步骤 3 的阈值不同），则接受该交易块并将其发送到网络。强联盟已就最新的交易块达成共识。
- 步骤 5 - 下一个区块由循环中的下一个区块签名者提出，整个过程重复进行。

由于强联盟的区块生成不是概率性的，而是基于一组固定的签名者，因此它永远不会受到多区块重组的影响。这就大大减少了与确认交易相关的等待时间。它还消除了挖矿牟利的动机（即区块奖励），取而代之的是让所有参与者都有一个共同目标，即确保网络以对所有人都有利的方式继续运行，从而有效地参与网络。这样做不会引入单点故障或更高的信任要求。

### 作为侧链的元素--守望者和联合双向插座

当作为侧链运行时，强联盟的一些成员需要履行额外的职责，即守望者。守望者负责将资产转入和转出元素侧链，这一过程被称为 "Peg-In "和 "Peg-Out"。

为了使侧链以可信的方式运行，它必须允许参与者验证资产供应是可控和可验证的。Elements 侧链使用双向联合 Peg 来实现资产进出 Elements 区块链的双向转移。这满足了可证明发行和链间转移的要求。

联邦双向挂钩功能允许资产与其他区块链互操作，并代表另一个区块链的本地资产。通过将您的区块链与其他区块链挂钩，您可以扩展主链的功能，并克服其固有的一些局限性。

从高层次来看，当有人将主链资产发送到多签名守望先锋钱包控制的地址时，就会发生向侧链转账的情况。这实际上冻结了主链上的资产。然后，守望先锋会验证交易，并在侧链上释放相同数量的相关资产。释放的资产会被发送到能证明对原始主链资产拥有所有权的侧链钱包。这一过程有效地将资产从主链转移到侧链。

为了将资产转回主链，用户需要在侧链上进行特殊的挂出交易。守望者会对该交易进行检查，然后从他们在主链上控制的多重签名钱包中签署交易支出。在主链交易生效之前，联盟中必须有一定数量的参与者签名。当守望者将资产发送回主链时，他们也会销毁侧链上的相应金额，从而有效地在区块链之间转移资产。

## 设置和运行元素

<chapterId>cc806e5a-81ab-457b-9531-9f863120a019</chapterId>

![Video](https://youtu.be/Frr_OjTEPAM?si=iq5XonJyQk8S5OAu)

由于 "元素 "基于比特币代码库，因此构成正常网络的组件非常相似。

Elements 节点软件本身称为 "elementsd"，在用户机器上作为守护进程运行。守护进程（或 Windows 中的服务）是一种作为后台服务运行的程序，不需要登录用户的直接控制。

注：在本文中，我们始终将 elementsd 作为守护进程版本，但只要启用服务器选项，一切都可以通过 elements-qt 完成。

Elements 守护进程连接网络上的其他节点，以便交换交易和区块数据，验证和扩展网络区块链的本地副本。

Elements 软件还包含一个名为 "elements-cli "的客户端程序，允许用户通过命令行向 elementsd 发送远程过程调用（RPC）命令。例如，它可用于查询钱包余额、查看交易或区块数据或广播交易。使用过比特币对应程序 bitcoind 和 bitcoin-cli 的人应该不会对这种设置感到陌生。

由于元素节点可以在启动时通过传递参数或配置文件进行配置，因此可以在同一台机器上运行多个实例。这对于测试和开发非常有用，因为您可以在一台机器上建立自己的本地网络，每个元素节点都有自己的区块链数据副本，管理自己的未确认有效交易池，并在不同端口上监听 RPC 请求。

### 元素代码库和社区

Elements 是一个开源项目，其源代码可在 Elements GitHub 代码库中找到：https://github.com/ElementsProject/elements。该资源库包含 elementsd 和 elements-cli 程序的源代码，以及配套的安装和构建工具、测试套件和一些说明文档。

作为代码库的补充，还有 https://elementsproject.org 网站，这是一个以社区为中心的资源库，其中包含对 Elements 是什么、如何工作的解释，以及全面的教程部分。教程的重点是通过命令行示例学习 Elements，并向您展示如何在其基础上构建简单的桌面和网络应用程序。该网站还列出了广受欢迎的 Elements 社区论坛，网站本身也托管在 GitHub 上，以便社区为网站内容提供贡献。

要在机器上运行圆方软件，首先需要克隆（下载一份）源代码，安装代码中的任何依赖项，最后构建守护进程和客户端可执行文件。然后就可以配置和运行 Elements 软件了。

## 配置节点和网络

<chapterId>df1ec0aa-84ea-4149-af7a-b4523d67e1d9</chapterId>

可以在启动时将配置设置传递给元素节点，以改变其运行、验证数据、连接其他节点和初始化区块链数据的方式。

设置可以从指定的 `elements.conf` 文件加载，也可以通过命令行作为参数传递。

使用这些参数可以更改一些内容：


- 独立区块链实施中使用的默认资产名称。
- 创建的初始资产的编号。
- 支付网络交易费用时使用的资产。
- 区块链数据文件的存储位置。
- 用于连接比特币节点的 RPC 凭据。
- 需要满足的 "n of m "阈值，以及可以签署区块的有效公钥。
- 为了将资产转入或转出侧链而需要满足的脚本。
- 是否作为侧链连接比特币节点。

其中许多构成了网络共识规则的一部分，因此在启动时在所有节点上应用这些规则非常重要。有些规则可以在链初始化后更改，但有些规则需要在用于链初始化后进行修正。

参数的使用将在课程后面的章节中涉及。

### 使用命令行进行基本操作

本课程将展示使用 `elements-cli` 程序对一个或多个 Elements 节点进行 RPC 调用的示例。调用是在终端会话中进行的，为了使命令更简短，将使用 "别名"。根据这个惯例，当你看到类似下面的命令时：

```bash
e1-dae
e1-cli getnewaddress
```

e1-dae "和 "e1-cli "实际上是利用终端的 "别名 "功能排版的快捷方式。在执行命令时，`e1-dae` 和 `e1-cli`实际上会被替换，运行的命令类似于

```
$HOME/elements/src/elementsd -datadir=$HOME/elementsdir1
$HOME/elements/src/elements-cli -datadir=$HOME/elementsdir1 getnewaddress
```

我们在上面看到的是启动 Elements 守护进程的调用，以及对位于 `$HOME/elements/src` 目录下的 elements-cli 程序的调用，还有 `datadir` 参数的值。通过 `datadir` 参数，我们可以告诉守护进程和客户端实例在哪里找到它们的配置文件，对于守护进程来说，还可以告诉它们在哪里存储区块链副本。由于它们共享一个配置文件，客户端将能够对守护进程进行 RPC 调用。

再次运行上述命令，但使用不同的 `datadir` 值，我们就可以启动多个 Elements 实例，每个实例都有自己独立的区块链副本和配置设置。根据这一惯例，我们将在课程中使用别名 `e2-dae` 和 `e2-cli` 来指代与 e1 不同的数据目录。因此，第二个 `e2` 实例的上述示例将是：

```
$HOME/elements/src/elementsd -datadir=$HOME/elementsdir2
$HOME/elements/src/elements-cli -datadir=$HOME/elementsdir2 getnewaddress
```

这将使我们能够执行各种操作，如节点之间的资产交易、资产发行以及检查同一网络不同节点之间机密交易中盲区的使用情况。

# 使用元素 实用案例

<partId>3f31a30a-957a-4813-b5fe-5dccbb5366f3</partId>

## 机密交易

<chapterId>263b1c5b-59ed-49e7-b811-95c354f41eae</chapterId>

![Video](https://youtu.be/-by2xBtXQeE?si=7bLo_geGn3qh7MXN)

在本节中，您将学习如何使用 "元素 "的保密事务功能。

默认情况下，"元素 "中的所有地址都使用 "保密交易 "进行保密，只有交易参与者（以及他们选择向其透露保密密钥的参与者）才能看到所转移资产的数量和类型，同时还能通过加密技术保证所花费的硬币不会超过可用硬币的数量。

### 保密地址和保密交易

默认情况下，使用 "getnewaddress "命令在 "元素 "中创建新地址时，该地址将作为机密地址创建。

为了演示保密交易，我们将让 e2 向自己发送一些资金，然后尝试查看来自 e1 的交易。这将展示 Elements 中交易的保密性。

元素节点生成的每个新地址默认都是保密的。我们可以让 e2 生成一个新地址来证明这一点。

```
e2-cli getnewaddress
```

请注意，该地址以 e1 开头。这表明它是一个保密地址。使用 getaddressinfo 命令更详细地查看该地址，可以看到地址的更多细节。

```
e2-cli getaddressinfo <address>
```

你可以看到，有一个 confidential_key 属性告诉我们这是一个保密地址。

confidential_key 是公共保密密钥，被添加到保密地址本身。这就是保密地址如此之长的原因。

它还有一个相关的非保密地址。如果您希望在 "要素 "中使用常规的非机密交易，则应将资产发送到该地址，而不是带有 lq1 前缀的地址。

现在我们可以让 e2 向它生成的地址发送一些资金。这将证明，由于 e1 不是交易方之一，因此无法查看交易详情。

```
e2-cli sendtoaddress <address>
```

记下交易 ID。确认交易。

```
e2-cli -generate 101
```

从 e2 自身的角度来看 e2 向自己发送资金的交易。

```
e2-cli gettransaction <txid>
```

向上滚动交易详情，可以看到 e2 可以查看发送和接收的金额以及交易的资产。您还可以看到 amountblinder 和 assetblinder 属性，这两个属性用于屏蔽未参与交易的其他节点的详细信息。

要从 e1 中查看同一交易的详细信息，我们首先需要获取原始交易详细信息。

```
e1-cli getrawtransaction <txid>
```

返回原始交易详细信息。如果查看 vout 部分，可以看到有三个实例。前两个实例是收款金额和找零金额，第三个是交易费用。在这三笔金额中，只有手续费可以看到数值，因为手续费本身在 "元素 "中是不透明的。

### 闪亮钥匙

前两个 vout 部分显示的是价值金额的 "盲区"，以及作为实际交易金额和资产类型证明的承诺数据。

即使我们把 e2 的私钥导入到 e1 的钱包中，它仍然无法看到交易资产的数量和类型，因为它仍然不知道 e2 使用的盲钥。我们将通过把 e2 钱包使用的私钥导入 e1 钱包来证明这一点。首先，我们需要从 e2 导出密钥

```
e2-cli dumpprivkey <address>
```

然后将其导入 e1。

```
e1-cli importprivkey <privkey>
```

现在我们可以证明，e1 仍然看不到这些值。

```
e1-cli gettransaction <txid>
```

事实上，它显示的发送量为 0，而实际上是 1。

要查看实际的、未勾选的值，我们需要盲键。为此，我们首先从 e2 导出盲键。

```
e2-cli dumpblindingkey <address>
```

然后将其导入 e1。

```
e1-cli importblindingkey <address> <blinding key>
```

现在，我们从 e1 获取交易详情。

```
e1-cli gettransaction <txid>
```

这表明，在导入盲键后，我们现在可以查看事务中 1 的实际值。

在本节中，我们已经看到，使用保密密钥可以隐藏交易中的资产金额和类型，而通过导入正确的保密密钥，我们就可以揭示这些值。举例来说，在实际使用中，如果需要核实某一方持有的资产数量和类型，可以将保密密钥交给审计师。要素》的保密交易功能还允许执行 "范围证明"。范围证明可以证明资产持有量在给定范围内，而无需暴露实际持有量。

我们还看到，保密交易是可选的，但在生成新地址时默认为启用。

本课到此结束；祝你在测验中取得好成绩，下课再见！

## 已发行资产

<chapterId>c33c7020-5975-457a-99db-4f8b90d1fa1c</chapterId>

![Video](https://youtu.be/XnY4WZUNSs4?si=dG8I5OoSh_0EBdvL)

在本节中，您将学习如何使用元素的 "发行资产 "功能。

发行资产可以在元素网络参与者之间发行和转移多种类型的资产。网络上的任何节点都可以发行自己的资产。发行的资产可代表任何资产的可互换所有权，包括凭证、优惠券、货币、存款、债券、股票等。发行资产为构建无信任交易所、期权和其他涉及自发行资产的高级智能合约打开了大门。

已发行资产也受益于保密交易，持有相关代币的任何人都可以重新发行这些资产。

第一步，我们需要访问两个元素节点，我们称之为 e1 和 e2。这两个节点的区块链已被重置，默认资产也被分割。

这两个节点在同一个本地网络中，并且相互连接，因此在它们的交易内存池中共享相同的交易和相同的区块链。虽然它们运行在同一台机器上，但值得注意的是，它们并不共享相同的实际区块链文件。每个节点都管理着自己的区块链本地副本，其中包含相同的交易历史，因为它们达成了共识，彼此遵守相同的协议规则。

我们先来看看每个节点对网络上现有资产发行情况的看法。

可以使用 listissuances 命令来实现。

```
e1-cli listissuances
e2-cli listissuances
```

可以看到，两个节点都显示了相同的发行历史。它们都显示了一个资产，即在链初始化时创建的 2,100 万比特币的初始发行。你可以在运行上述命令的结果中看到资产的十六进制 id，以及分配给资产的标签，即 "比特币"。

值得注意的是，在链初始化时，默认资产总是有一个标签。当你发布自己的资产时，你可以自己为它们设置标签，我们很快就会这样做。在此之前，我们需要发布自己的资产。

我们将让 e1 发布新资产。这是通过 issueasset 命令完成的。

```
e1-cli issueasset 100 1 false
```

`issueasset` 接受 3 个参数。

要发行的新资产的数量，我们用的是 100。要创建的代币数量（代币用于重新发行资产的数量），我们选择了 1。最后一个参数是让圆方创建盲目或非盲目的资产发行。我们将使用 "非屏蔽"，因为我们想在一分钟后从 e2 中查看发行量，所以我们输入了 false。

运行该命令会返回有关发行的数据。这些数据包括交易 ID（可以复制一份供以后使用）、资产的十六进制唯一值和资产令牌的十六进制唯一值。

生成区块，确认发行交易。

```
e1-cli -generate 1
```

再次针对 e1 运行 `listissuances` 命令。

```
e1-cli listissuances
```

这表明，e1 现在知道 2 个发行，即比特币的初始发行和我们新发行的资产，我们可以看到其中的 100 个。请注意新资产的十六进制值，和比特币的发行一样，没有相关的资产标签。

再次查看 e2 的已知发行列表。

```
e2-cli listissuances
```

这说明，e2 并不知道 e1 发行了资产。它只能看到它已经能看到的比特币的初始发行。

这是因为 e2 不知道、也没有注意到 e1 发出新资产时所发送的地址。

值得注意的是，即使 e2 无法看到发行本身，e1 仍可向 e2 发送部分资产。这样，新资产就会显示为 e2 钱包中的可用余额，尽管它并不知道原始发行。

为了让 e2 能够看到实际签发情况（以及签发金额），我们需要将该地址作为监视地址添加到 e2 中。

为此，我们需要找出资产发送到的地址。为此，我们将使用之前复制的交易 ID，让 e1 获取该交易的详细信息，这样就能找出正确的地址，添加到 e2 的钱包观察列表中。

```
e1-cli gettransaction <the-issuance-transaction-id>
```

向上滚动交易数据的十六进制值，您将看到接收 100 个新资产的地址，该地址由十六进制值标识。

把地址复制下来，这样我们就能把它导入到 e2 中。

现在，让我们将该地址导入 e2。为此，我们使用 importaddress 命令。

```
e2-cli importaddress <the-issued-to-address>
```

如果我们现在查看 e2 的发行清单。

```
e2-cli listissuances
```

您可以看到，我们新发行的资产现在已包含在列表中。e2 节点还能确定已发行资产的金额，以及相关代币的金额，因为这次发行是非屏蔽发行。要在 "元素 "中启用资产 ID 名称映射，首先要停止 "元素"。

```
e1-cli stop
```

然后用一个附加参数重新启动它，将资产的十六进制映射到提供的标签上。这样，节点就能以更人性化的格式向我们显示资产数据。如果你愿意，可以将其添加到 elements.conf 的末尾，这样就不需要每次启动守护进程时都添加参数了。例如

```
assetdir=5186d0bc8ed15e6ef85571bd2d8070573adf0e06fd4507082694526975ce4f35:My new asset (MNA)
```

但我们在这里将使用参数法。

```
e1-dae -assetdir=<assetid-here>:<name-of-the-new-asset>
```

再次查询节点的发行清单。

```
e1-cli listissuances
```

这说明资产的十六进制值与标签的映射是有效的。再次检查 e2 节点的发行列表。

```
e2-cli listissuances
```

可以看到，e2 节点无法访问该标签，因为只有设置标签的节点才能访问标签。事实上，我们可以在 e2 节点上为同一个资产 hex 分配与 e1 节点不同的标签。首先停止 e2 节点。

```
e2-cli stop
```

重新开始时，为新资产的十六进制分配一个不同的标签。

```
e2-dae -assetdir=<assetid-here>:<another-name-for-the-new-asset>
```

列出 e2 的发行情况。

```
e2-cli listissuances
```

资产标签是每个节点的本地标签，网络上的其他节点只能识别资产的六角形。

在进行交易和钱包余额查询等操作时，标签到资产六角的映射非常有用，因为它允许以一种速记的方式来指代资产。例如，如果我们想将一些新资产（金额为 10）从 e1 发送到 e2，而不使用标签。

首先，我们需要获取发送资产的地址。

```
e2-cli getnewaddress
```

然后使用 sendtoaddress 命令。

```
e1-cli sendtoaddress <address> 10 "" "" false false 1 UNSET false <asset-id-here>
```

通过生成区块确认交易。

```
generate 1
```

检查 e2 是否收到资产。

```
e2-cli getwalletinfo
```

我们可以看到，该资产确实已收到。

请注意，e2 会映射接收到的资产的十六进制，并使用自己的标签显示。要做同样的事情，更简单的方法是在发送时使用 e1 的资产标签。

```
e1-cli sendtoaddress <address> 10 "" "" false false 1 UNSET false <name-of-the-new-asset>
```

在幕后，Elements 将本地标签映射为十六进制值，帮助简化已发布资产的使用。

在本节中，我们了解了如何发行和标记资产。下一节我们将了解已发行资产的再发行和销毁。

## 重新发行资产

<chapterId>78751b21-1dc8-4877-a406-e71bc80a95b0</chapterId>

![Video](https://youtu.be/5em79YHtYk0?si=rhponm6Hw9AB6RJp)

在本节中，你将学习如何发行更多已发行资产，以及如何销毁一定数量的已发行资产。

当资产所代表的东西没有固定的供应量时，就可能需要重新发行（创造更多的资产）或销毁一定数量的资产。例如，这可能适用于代表存放在金库中的黄金的资产；随着黄金单位进出金库，代表金库供应量的资产也需要相应地增减。

重新发行一定数量的资产需要拥有相关代币的所有权，这些代币是在最初发行资产时与资产一起创建的。

在创建更多资产时，只要重新发行资产的节点拥有通常所说的资产重新发行令牌，那么最初发行资产的节点并不重要。我们将了解如何初始创建再发行令牌，如何使用它来再发行一定数量的资产，以及如何将再发行令牌转移给其他节点，以便它们也有权限再发行资产。

我们需要访问两个元素节点，分别称为 e1 和 e2。这两个节点的区块链已经重置，它们之间的默认资产已经分割。

我们让 e1 发行 100 个新资产，并为同一资产创建 1 个再发行代币。为了简化示例，我们将以非屏蔽方式创建发行。因此，让我们继续发行资产及其相关的再发行代币。

```
e1-cli issueasset 100 1 false
```

注意资产 ID 和（重新发行）令牌的 ID。

由于稍后我们将从 e2 重新发行更多资产，因此我们需要记下资产发行时的交易 ID，并用它来导入资产发送的地址。

确认交易。

```
e1-cli -generate 1
```

现在，我们将使用 gettransaction 命令检查交易的详细信息：

```
e1-cli gettransaction <txid>
```

向上滚动交易数据的十六进制，你会看到在交易中，e1 收到了 1 个再发行令牌和 100 个相关资产。

复制一份地址，以便我们将其导入 e2。

现在将地址导入 e2 钱包。

```
e2-cli importaddress <address>
```

现在我们可以看到，e1 和 e2 都知道资产的发行。

```
e1-cli listissuances
e2-cli listissuances
```

目前，e1 持有一定数量的资产和 1 个重发代币，但 e2 没有。

```
e1-cli getwalletinfo
```

另外请注意，e1 拥有的默认资产比以前少，因为它支付了一小笔交易费用。当创建的区块成熟超过 100 个区块时，e1 将收取这笔费用。

```
e2-cli getwalletinfo
```

由于 e1 持有重发令牌，因此可以重发更多的重发令牌。这可以通过使用 reissueasset 命令来实现。让 e1 再发行 100 个资产。

```
e1-cli reissueasset <asset-id> 100
```

检查重发成功。

```
e1-cli getwalletinfo
```

您可以看到，e1 现在持有 200 的资产。

由于 e2 没有持有一定数量的重新发行令牌，如果他们尝试重新发行资产，就会收到错误信息。

```
e2-cli reissueasset <asset-id> 100
```

注意错误信息。

我们可以使用 listissuances 命令从 e1 查看补发的详细信息。

```
e1-cli listissuances
```

请注意 "is_reissuance "标志。

如果我们现在向 e2 发送一定量的再发行令牌，他们就能自己再发行一定量的资产。首先，我们需要一个发送地址。值得注意的是，在发送和显示余额时，重发代币与元素中的其他资产一样，也可以像其他资产一样分解成更小的面值，因此我们不需要向 e2 发送 1 个重发代币就能重发资产。任何面值都可以。为 e2 生成接收再发行代币的地址。

```
e2-cli getnewaddress
```

然后从 e1 向 e2 发送一部分 RIT。

```
e1-cli sendtoaddress <address-of-e2> 0.1 "" "" false false 1 UNSET false <reissuance-token-id>
```

确认交易。

```
e1-cli -generate 1
```

现在我们可以看到，e2 持有发送给它的 0.1。

```
e2-cli getwalletinfo
```

这意味着 e2 现在可以重新发行更多与其钱包中持有的 RIT 相关的资产。我们将让 e2 重新发行 500 枚资产。

```
e2-cli reissueasset <asset-id> 500
```

检查重新签发的结果。

```
e2-cli getwalletinfo
```

您可以看到，e2 现在的钱包余额中持有重新发行的金额，而且在资产重新发行的过程中，RIT 本身并没有被消耗。

销毁一定数量的资产是任何至少持有被销毁资产数量的人都可以做的事情，不受重新发行令牌的限制。

```
e2-cli destroyamount <asset-id>
e2-cli getwalletinfo
```

在本节中，我们已经了解了如何发行资产，以及如何使用作为资产发行一部分而可选择创建的再发行令牌。我们还看到了转让再发行代币如何像转让其他资产一样简单，以及持有任何数量的再发行代币都会赋予持有者发行更多相关资产的权利。因此，控制谁能在网络中使用再发行代币非常重要。我们还看到了如何销毁一定量的资产，而这一过程不受持有再发行代币的控制。

# 元素联合会

<partId>173a2440-0203-4dcc-8e2b-f8fa2cc8d3ca</partId>

## 区块签名

<chapterId>c47b217e-db14-4843-a66f-3e5f3a00a808</chapterId>

![Video](https://youtu.be/kxWX91fCnus?si=KItm_Am3_RrBcLBN)

元素支持联合签名模式，允许您指定为生成有效区块而必须签名的强联盟成员数量。

以前，为了便于举例说明，我们一直使用 "生成 "命令来创建区块，该命令无需满足多重签名的要求，这样创建的区块才能被网络视为有效。

我们将对节点进行设置，使其需要创建 2 对 2 多重签名区块。这将使用 signblockscript 参数进行设置，该参数可以添加到配置文件中，也可以在启动时传入节点中。要使用该参数初始化一个链，我们首先需要构建由其组成的脚本。

我们将使用一些现有节点来完成这项工作，保存它们输出的数据，然后擦除链，这样我们就可以使用 signblockscript 参数重新启动它。这是必要的，因为脚本是网络共识规则的一部分，需要在链初始化时设置。它不能在以后添加到已经存在的链上。

我们需要访问两个元素节点，分别称为 e1 和 e2。这两个节点的区块链已被重置，默认资产也被分割。

确保在 elements.conf 文件中将 con_max_block_sig_size 参数设置为较高值，否则本节后面的块签名将失败。在本教程中，我们设置了 con_max_block_sig_size=2000。

由于我们将重置区块链，并清除与 e1 和 e2 相关的钱包，因此我们需要复制一份地址、公钥和私钥，以用于生成区块签名脚本，以便日后使用。

首先，我们需要每个区块签名节点生成一个新地址，你需要复制一份该地址。

```
e1-cli getnewaddress
e2-cli getnewaddress
```

然后，我们需要从地址中提取公钥，并记录下来以备后用。

```
e1-cli getaddressinfo <e1-address>
e2-cli getaddressinfo <e2-address>
```

然后提取私钥，稍后我们将重新导入私钥，这样节点就能在我们重新初始化区块链和钱包数据后签署区块。

```
e1-cli dumpprivkey <e1-address>
e2-cli dumpprivkey <e2-address>
```

现在，我们需要生成一个具有 2 对 2 多重签名要求的赎回脚本。为此，我们需要使用 createmultisig 命令，将第一个参数设置为 2，然后提供两个公钥。以后创建区块时，需要证明所有权的就是这些密钥。

e1 或 e2 节点都可以生成多重标识。

```
e1-cli createmultisig 2 '["<e1-pubkey>", "<e2-pubkey>"]'
```

这样就有了我们的代码脚本，你可以复制它以备日后使用。

现在，我们需要清除现有的区块链和钱包数据，这样就可以重新使用新的 signblockscript 作为链的共识规则的一部分。这就是为什么我们需要提前拷贝一些数据的原因，比如新链中用来签署区块的私钥。在继续之前，你需要这样做。

删除现有钱包和链数据后，我们就可以启动节点，让它们使用 signblockscript 参数初始化一条新链。让我们输入 -evbparams=dynafed:0::: 来禁用 dynafed 激活，因为在本例中我们并不需要这一高级功能。

```
e1-dae -signblockscript=<redeem-script> -evbparams=dynafed:0:::
e2-dae -signblockscript=<redeem-script> -evbparams=dynafed:0:::
```

现在，我们需要导入之前保存的私钥，这样我们的节点就可以签名并帮助完成任何提议的区块。

```
e1-cli importprivkey <e1-priv-key>
e2-cli importprivkey <e2-priv-key>
```

由于生成命令不符合节点现在执行的所需块签名规则，因此现在使用生成命令会出错。

```
e1-cli -generate 1
```

为了提出一个新区块，任一节点都可以调用 getnewblockhex 命令。这将返回新区块的十六进制值，在被网络上的任何节点接受之前，都需要对其进行签名。

```
e1-cli getnewblockhex
```

请记住，该命令只是创建一个建议区块，而不是生成一个区块。

为了证实这一点，我们可以看到区块链中目前没有任何区块。

```
e1-cli getblockcount
```

如果我们尝试在未签名的情况下提交块六角形。

```
e1-cli submitblock <block-hex>
```

我们收到一条信息，告诉我们区块证明无效。这是因为它尚未由所需的两方中的两方签署。

因此，让我们让 e1 签署拟议的区块。

```
e1-cli signblock <block-hex>
```

让 e2 在六角上签名。

```
e2-cli signblock <block-hex>
```

请注意，e2 并不对 e1 签名提议区块后产生的输出结果进行签名。他们都会独立于彼此的结果签署所提议的区块六角。

现在，我们需要合并 e1 和 e2 的区块签名。任何一个节点都可以做到这一点，它们所需要的只是来自另一个节点的签名块十六进制。

```
e1-cli combineblocksigs <block-hex> '["<signed-hex-from-e1>", "<signed-hex-from-e2>"]'
```

可以看到，combellblocksigs 命令会输出已签名区块的十六进制值以及完成状态，告诉我们区块十六进制值已准备好提交。

现在，任一节点都可以提交已完成的区块 hex。我们让 e1 来做。

```
e1-cli submitblock <combined-signed-hex>
```

检查提交是否有效。

```
e1-cli getblockcount
e2-cli getblockcount
```

您可以看到，e1 和 e2 都认为该区块有效，并将其添加到了各自区块链本地副本的顶端。

总结一下整个过程。在本节中，我们有


- 建议一个街区。
- 让每个节点都签了字。
- 合并签名。
- 检查签名是否有效，是否符合链的赎回阈值。
- 提交街区。

网络上的每个节点都会对区块进行验证，并将其添加到本地的区块链副本中。

### 区块规划

虽然最初的过程看似复杂，但 Elements 中的区块签名顺序始终如一，只需进行一次初始设置：

1.初始设置（执行一次）

2.使用联合区块签名者的公开密钥创建名为 "signblockscript "的多重签名地址。

3.其中的赎回脚本用于启动新的区块链。

4.区块生产（进行中）

5.生成建议区块并交换签名。

一旦有一定数量的签名者签署了提议的区块，该区块就会被合并并提交给网络。如果符合链的 "signblockscript "标准，节点就会将其作为有效区块接受。

## 作为侧链的元素

<chapterId>432d7a65-255f-44a3-8b38-78508202cb37</chapterId>

![Video](https://youtu.be/egYzj4N8CB8?si=v7_-IXsjHPE-ARDe)

Elements 是一个开源的通用区块链平台，也可以 "挂接 "到现有的区块链上，如比特币。当与另一个区块链挂钩时，Elements 被称为 "侧链"。侧链实现了资产从一条链到另一条链的双向转移。将 Elements 作为侧链实施，可以绕过主链的一些固有限制，同时保留主链上资产所提供的高度安全性。

侧链知道主链及其交易历史，而主链不知道侧链，侧链的运行也不需要主链。这使得侧链可以不受主链协议改进提案的限制或延迟而进行创新。扩展主协议可以让主链本身保持安全和专业化，为侧链的顺利运行提供支持，而不是试图直接改变主协议。

通过扩展比特币的功能并利用其底层安全性，基于元素的侧链能够提供主链用户以前无法使用的新功能。液体网络（Liquid Network）就是基于元素的侧链在生产应用中的一个例子。

为了将 Elements 区块链初始化为侧链，我们需要使用联合挂钩脚本参数。该参数可以在节点的配置文件中设置，也可以在启动时传入。

联盟挂钩脚本定义了强联盟中哪些成员可以执行挂钩输入和挂钩输出功能。这些成员被称为 "守望者"，因为他们会监视主链和侧链上的有效钉入和钉出交易，并在有效时对其采取行动。挂出 "是指将挂钩资产从侧链移出并移入主链，"挂入 "是指将挂钩资产从主链移入侧链。当我们说 "移入侧链 "时，我们的实际意思是资金被锁定在主链上的多重签名地址中，并在 Elements 侧链上创建相应数量的资产。当我们说 "移出侧链 "时，我们的意思是在元素侧链上销毁资产，并从主链上锁定的资金中释放相应的金额。允许执行挂钩入和挂钩出功能，需要职能部门证明联盟挂钩脚本中使用的公钥的所有权。这需要使用相应的私钥。

因此，为了创建联合挂接脚本，我们首先需要让每个节点生成一个公钥。我们还需要存储相关的私钥，以备日后使用，因为我们需要擦除任何现有的链数据，并使用联合挂钩脚本初始化一条新链。这是因为联盟挂钩脚本构成了侧链共识规则的一部分，以后无法应用到现有的非挂钩区块链上。

因此，让我们为每个节点生成一个地址，存储相关数据以备后用，并生成联合挂钩脚本，稍后我们将用它来初始化侧链。

首先，我们需要在网络中充当守望者的每个节点生成一个新地址。

```
e1-cli getnewaddress
e2-cli getnewaddress
```

然后，我们验证地址，获取公钥。

```
e1-cli getaddressinfo <e1-address>
e2-cli getaddressinfo <e2-address>
```

然后检索与每个地址相关的私钥。

```
e1-cli dumpprivkey <e1-address>
e2-cli dumpprivkey <e2-address>
```

存储私钥和公钥，以备日后使用。

现在，我们需要清除现有的区块链和钱包数据，因为我们将使用联合挂钩脚本初始化新的区块链。你现在就可以这么做了。别忘了启动比特币守护进程，我们需要将其挂起。

现在，我们可以使用之前存储的公钥创建的联合挂接脚本初始化新链。我们输入的数字和公钥周围的数字定义并限定了使用的密钥数量，以及必须证明的密钥所有权，以便钉入和钉出侧链。

```
e1-dae -fedpegscript=5221<e1-pubkey>21<e2-pubkey>52ae
e2-dae -fedpegscript=5221<e1-pubkey>21<e2-pubkey>52ae
```

现在，我们将导入之前保存的私钥，以便我们的节点随后可以签署并完成链之间的资产转移，满足联合挂钩脚本的要求。

```
e1-cli importprivkey <priv-key-1>
e2-cli importprivkey <priv-key-1>
```

现在，我们需要让两条链上的一些区块成熟。区块成熟是挂钩过程的一项要求，因为它可以防止主链上的区块重组导致侧链上的挂钩资产供应膨胀。

为使本节重点放在联合挂接上，我们将不使用上一节介绍的区块签名模型来生成区块，而是使用 "生成 "命令来创建新区块。

```
b-cli generate 101
e1-cli generate 1
```

我们现在不一定需要生成元素块。不过，我们还是要生成一个。这是避免潜在矛盾的好方法。

现在，我们的链已经准备好挂接。为了挂接，我们需要使用 getpeginaddress 命令生成一种特殊的地址。请注意，从使用 getpeginaddress 生成挂接地址到使用 claimpegin 申请地址之间的时间应尽可能缩短。

```
e1-cli getpeginaddress
```

您可以看到，该命令创建了一个新的主链地址，以及一个新的脚本。主链地址是一个 "支付给脚本哈希 "地址，将由在 Elements 网络中扮演守望者角色的工作人员使用。

与 getnewaddress 一样，getpeginaddress 也会在调用节点的钱包中添加一个新的秘密，因此在节点管理过程中必须考虑到钱包文件的备份。

现在，我们将从主链向侧链发送一些比特币。我们的主链回归测试钱包已经持有一些资金。

```
b-cli getwalletinfo
```

我们可以看到钱包里有 50 个比特币。我们将从主链向侧链发送一个比特币。我们需要向节点之前生成的主链地址发送资金。

```
b-cli sendtoaddress <e1-pegin-address>
```

我们需要保留这笔交易的 ID，因为我们以后需要它作为资金证明。

现在我们可以看到，主链钱包余额减少了我们发送的金额，另外还有一小笔金额用于支付交易费用。

```
b-cli getwalletinfo
```

我们需要再次成熟交易。

```
b-cli generate 101
```

为了让 Elements 节点获得挂钩资金，我们需要获得挂钩交易的 "证明"。加密证明使用资金交易 ID 计算梅克尔路径，并证明交易存在于已确认的区块中。

```
b-cli gettxoutproof '["<tx-id>"]'
```

我们还需要原始交易数据。

```
b-cli getrawtransaction <tx-id>
```

有了挂钩交易的证明和原始数据，我们的元素节点现在就可以使用原始交易和交易证明申请挂钩。

```
e1-cli claimpegin <raw> <proof>
```

请注意，我们可以向 claimpegin 提供可选的第三个参数。这第三个参数可用于指定要发送索赔资金的侧链地址。在我们的示例中不需要这样做，因为我们是从拥有索赔资金地址的同一节点调用命令的。

检查 e1 的余额。

```
e1-cli getwalletinfo
```

生成一个区块以确认索赔。

```
e1-cli generate 1
```

检查 e1 的余额。

```
e1-cli getwalletinfo
```

我们可以看到，挂接成功。

挂失的过程与此类似。即生成一个地址，向该地址发送资金，如果交易有效，则释放资金。我们不会介绍整个挂出过程，因为这涉及到主链上的工作，超出了本课程的范围。元素事件的步骤是：在主链上生成一个地址。

```
b-cli getnewaddress
```

使用 sendtomainchain 命令将资金从 Elements 节点发送到主链地址。

```
e1-cli sendtomainchain <new-address> 1
```

生成区块以确认交易。

```
e1-cli generate 1
```

检查节点钱包的余额。

```
e1-cli getwalletinfo
```

看到余额减少了。

在本节中，我们了解了如何


- 生成联合挂钩脚本。
- 初始化新链，将脚本用作网络共识参数规则。
- 从主链向侧链发送资金。
- 在元素侧链中申请资金。
- 了解如何开始将资金发送回主链。

### FederatedPegScript

为了让元素作为侧链运行，其区块链中的创世区块在创建时必须包含 "fedpegscript"。这可以通过在节点启动时输入 "fedpegscript "参数来实现。然后，该脚本将成为 Elements 区块链共识规则的一部分，并允许验证和执行钉入和钉出请求。

fedpegscript "由被授权执行挂接操作的人所控制的公钥组成。下图显示了 2-2 多重签名 fedpegscript 的示例格式：

```
fedpegscript=5221<public key 1>21<public key 2>52ae
```

注：公钥外的字符是分隔符，表示公钥和 "m 的 n "要求。例如，1-of-1 fedpegscript 的模板为 "5121<公钥 1>51ae"。

### 钉入式

在元素侧链接受挂钩之前，必须在主链上获得足够的确认。这是避免元素侧链上的挂钩资产供应膨胀所必需的，因为主链的重组可能会导致这种膨胀。

作为工作证明（PoW）共识机制正常运行的一部分，比特币区块链顶端的短期重组是意料之中的。因此，只有当挂钩在比特币区块链上有足够的深度时，圆方才会接受有效的挂钩。这样做的目的是为了防止 Elements 不止一次地接受相同的挂钩输入。

### 挂销

当 Elements 节点调用 "sendtomainchain "命令时，就会发生挂出交易，该命令需要输入主链地址（挂出目的地）以及要 "提取 "的挂钩资产金额。这将在侧链上创建一个挂出交易。一旦作为守望者的功能执行者检测到挂出交易在侧链上得到确认，他们就会按照我们在课程前几节学到的方法，将主链上的资产实际释放到挂出目的地。

## 作为独立区块链的元素

<chapterId>50dff39b-2702-47d7-9c15-0b54b845e99f</chapterId>

![Video](https://youtu.be/u-3rV7DGtD0?si=G1__H0Uelf4sTUDM)

到目前为止，我们已经了解了如何将 Elements 作为侧链运行。不过，它也可以作为独立的区块链解决方案运行，并拥有自己的默认本地资产。在这种设置下，元素区块链仍然保留了侧链实现的所有功能，如保密交易和发行资产，但不需要挂钩或挂钩退出来添加或移除流通中的默认资产数量。

在本节中，我们将

使用名为 "newasset "的默认资产初始化新的 Elements 区块链。

指定创建 1,000,000 个 "newasset "和 2 个再发行代币。

申领所有任何人都可以花费的 "新资产 "硬币。

为 "newasset "申领所有任何人都可以花费的再发行代币。

将资产及其再发行令牌发送到另一个节点的钱包。

从两个节点重新发出更多 "newasset"。

为了初始化 Elements 网络，使其作为独立区块链运行，每个节点都需要使用一些基本参数启动。这些参数用于告诉节点不要尝试验证来自其他区块链的挂钩入账、网络默认资产的名称以及要创建的默认资产和相关再发行代币的数量。

现在，我们将在两个连接的 Elements 节点上使用这些参数启动一条新链。我们将把默认资产命名为 "newasset"，并发行一百万个 "newasset "和两个 "newasset "再发行代币。

```
e1-dae -validatepegin=0 -defaultpeggedassetname=newasset -initialfreecoins=100000000000000 -initialreissuancetokens=200000000
e2-dae -validatepegin=0 -defaultpeggedassetname=newasset -initialfreecoins=100000000000000 -initialreissuancetokens=200000000
```

请注意，这里使用的金额是网络可接受的最小面值，因此 2 亿个再发行代币实际上相当于 2 个整代币。初始免费代币的面值也是如此。

查看我们节点当前的钱包余额。

```
e1-cli getwalletinfo
e2-cli getwalletinfo
```

我们可以看到初始化工作正常。

由于最初发行的资产是以 "任何人都可以消费 "的方式创建的，我们将让 e1 将其全部认领，这样我们就可以取消 e2 对这些资产的访问权限。

```
e1-cli getnewaddress
e1-cli sendtoaddress <e1-address> 1000000 "" "" true
```

请注意，我们不需要指定 "newasset "作为要发送的资产，因为它已经是默认资产，因此也是用于支付网络费用的默认资产。

在 "元素 "中，您可以向同一地址发送多种资产类型，因此我们可以重新使用刚刚生成的地址来接收默认资产，并将其用作重新发行代币的目标地址。

```
e1-cli sendtoaddress <e1-address> 1 "" "" false false 1 UNSET false <reissuance-token-id>
```

确认交易。

```
e1-cli generate 101
```

我们将检查 e1 是否是该资产及其再发行令牌的唯一持有者。

```
e1-cli getwalletinfo
e2-cli getwalletinfo
```

我们可以看到，情况确实如此。

现在，我们将向 e2 发送部分 "newasset"，e2 目前的余额为零。

```
e2-cli getnewaddress
e1-cli sendtoaddress <e2-address> 500 "" "" false
```

请注意，我们无需指定要发送的资产类型，因为 `newasset` 已被创建为网络的默认资产

我们还要向 e2 发送一些 `newasset` 的再发行代币。

```
e1-cli sendtoaddress <e2-address> 1 "" "" false false 1 UNSET false <reissuance-token-id>
```

确认交易。

```
e1-cli generate 101
```

我们可以检查钱包是否已相应更新。

```
e1-cli getwalletinfo
e2-cli getwalletinfo
```

现在，我们将重新发布 e1 中的一些默认资产。请注意，启动参数 initialreissuancetokens 将启用此功能。如果省略该参数或将其设置为零，将导致默认资产以后无法重新发行。

```
e1-cli reissueasset newasset 100
```

我们可以使用 `newasset` 标签，而不必提供十六进制 id 值，因为元素链总是会标注其默认资产。

检查默认资产的重新发行是否成功：

```
e1-cli generate 101
e1-cli getwalletinfo
```

现在我们将证明，由于 e2 持有一些 "新资产 "重新发行代币，它也可以重新发行默认资产。

```
e2-cli reissueasset newasset 100
```

检查 e2 重新发行默认资产是否成功。

```
e2-cli generate 101
e2-cli getwalletinfo
```

在本节中，我们将 Elements 设置为独立的区块链，并检查基本功能是否如我们所期望的那样运行。

我们使用启动参数来

使用名为 "newasset "的默认资产初始化一个新的 Elements 区块链。

指定链初始化时创建的默认资产的数量。

为默认资产创建一些再发行代币，并从两个节点再发行更多默认资产。

在我们的独立区块链 Elements 网络上，所有其他交易操作都将以与课程主要部分所涵盖的示例相同的方式进行，但将使用 "newasset "而不是 "比特币 "作为默认和收费资产。

### 节点启动和链初始化参数

要让 Elements 节点作为独立区块链运行，必须同时使用几个参数。我们现在就来看看每个参数的作用。

#### validatepegin=0`。

由于独立区块链不需要验证任何钉入或钉出交易，因此我们需要禁用这些检查。有了这个设置，你就不需要运行比特币客户端软件或存储比特币区块链副本，因为 Elements 网络将独立运行。

#### 缺省参数名

这允许您指定区块链初始化时创建的默认资产的名称。

#### 初始自由硬币

要创建的默认资产的数量（相当于比特币的中本聪单位）。

#### 初始发行代币

用于创建默认资产的再发行代币的数量（相当于比特币的中本聪单位）。如果没有这个值，就无法创建更多的默认资产。如果不想创建更多的默认资产，可以将其设置为零或省略。

使用这些参数，启动一个节点的常用方法如下：

```
e1-dae -validatepegin=0 -defaultpeggedassetname=newasset -initialfreecoins=100000000000000 -initialreissuancetokens=200000000
```

### 基本操作

默认资产名称 "参数为默认资产添加一个标签。如果没有此设置，默认资产将自动命名为 `比特币`。在前面的章节中，当我们向另一个节点发送我们自己发行的资产时，我们必须指定资产十六进制或本地应用的资产标签，以告诉 Elements 我们发送的是哪个资产。由于 "defaultpeggedassetname "适用于所有节点，因此我们在发送时无需为其命名，即使它的名称不是 "比特币"。以前默认发送 `bitcoin` 的每个函数现在都会发送您选择的默认资产名称。

因此，向一个地址发送 10 个新的默认资产非常简单：

```
e1-cli sendtoaddress <destination address> 10 "" "" true
```

如果你还为节点提供了一个大于零的 "初始重发行代币 "值，那么你也可以重新发行更多的默认资产，而如果你将 Elements 作为侧链运行，则无法做到这一点。

要做到这一点，任何持有与默认资产相关的代币数量的节点只需发出一个命令即可：

```
e1-cli reissueasset <default asset name> <amount>
```

通过使用上述参数，您可以将 Elements 作为一个独立的区块链运行，它拥有自己的默认资产，与比特币和其他区块链脱钩。

## 结论

<chapterId>7e2c916d-8114-424c-97f5-cbff9d73b8e3</chapterId>

![Video](https://youtu.be/CTMdamTZBBM?si=16LBcXvN4pBfC7lr)

在本课程中，我们了解到 Elements 是一个开源网络协议，可以作为另一个区块链的侧链或独立的区块链解决方案来实施。

我们已经看到，Elements 的源代码和网站 (https://github.com/ElementsProject/elements) 都托管在 GitHub 上，还有一些社区讨论区，如 Build On L2(https://community.liquid.net/c/developers/) 或 Liquid Developers Telegram (https://t.me/liquid_devel)，可以用来了解在 Elements 和 Liquid 上部署和开发应用的更多信息。会议还讨论了保密交易和发行资产等关键功能，以及强联盟成员如何实现联合区块签名和双向 Peg 机制。

下一步是挑战自己，做一个涵盖前面所有章节的累积测验，然后开始您的元素之旅......祝您好运！

# 结论

<partId>d5dbd616-e291-42bc-aae3-6c44599dbd06</partId>

## 评论与评级

<chapterId>beae23bd-2fd1-49fe-8f38-ed169acde51d</chapterId>

<isCourseReview>真</isCourseReview>。

## 结论

<chapterId>15f62056-c69c-467e-9565-af48d439a1f5</chapterId>

祝贺您完成本课程！

我们很高兴您已经成功达到了学习旅程中的这一里程碑。通过您的努力和参与，您获得了宝贵的知识和技能，这将对您的职业发展大有裨益。