---
用語P2TR

---
P2TRは*Pay to Taproot*の略で、UTXO（Unspent Transaction Output）の支出条件を確立するために使用される標準的なスクリプトモデルです。2021年11月のTaprootの実装とともに導入された。P2TRは暗号鍵の集約にSchnorrプロトコルを利用するほか、MAST（*Merkelized Alternative Script Tree*）として知られる代替スクリプトのためのメルクルツリーも利用する。P2TRは、支出条件が公開される従来のトランザクションとは異なり（あるときは受け取り時に、あるときは支出時に）、単一の見かけの公開鍵の背後に複雑なスクリプトを隠すことができる。

技術的には、P2TRスクリプトは$K$と表記される一意のシュナー公開鍵でビットコインをロックする。しかし、この鍵 $K$ は実際には公開鍵 $P$ と公開鍵 $M$ の集合体であり、後者は `scriptPubKey` のリストの Merkle ルートから計算される。P2TRスクリプトでロックされたビットコインは、公開鍵$P$の署名を公開する方法と、メルクルツリーに含まれるスクリプトのいずれかを満たす方法である。前者を「*鍵パス*」、後者を「*スクリプトパス*」と呼ぶ。

このように、P2TRでは、ユーザーはビットコインを公開鍵に送ることも、好きな複数のスクリプトに送ることもできる。このスクリプトのもう1つの利点は、P2TRアウトプットを使用する方法は複数ありますが、使用する1つだけを使用時に明らかにする必要があるため、未使用の代替手段を非公開のままにできることです。P2TRはバージョン1のSegWit出力であり、P2TR入力の署名はトランザクションの証人に保存され、`scriptSig`には保存されない。P2TR のアドレスは `Bech32m` エンコーディングで、`bc1p` で始まる。